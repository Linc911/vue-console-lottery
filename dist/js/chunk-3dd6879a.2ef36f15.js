(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd6879a"],{1638:function(t,e,a){},"16c3":function(t,e,a){},"2c80":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"remittance-user"},[a("SearchLayout",[a("div",{attrs:{slot:"left"},slot:"left"},[a("PaymentLineSearch",{on:{"on-search":t.handleSearch}})],1),a("div",{attrs:{slot:"right"},slot:"right"},[a("BaseAdd",{nativeOn:{click:function(e){t.$refs.dialogCreate.toggleDialogVisible(!0)}}})],1)]),a("div",{staticClass:"content-container"},[a("UserRemittanceTable",{attrs:{data:t.tableData},on:{"on-updated":function(e){t.fetchTableData()},"on-deleted":function(e){t.fetchTableData()}}}),a("BasePagination",{attrs:{page:t.page,requestParams:t.requestParams,httpURL:t.tableHttpAPI},on:{"on-change":t.handlePaginationChange}})],1),a("UserRemittanceDialogCreate",{ref:"dialogCreate",on:{"on-created":function(e){t.fetchTableData()}}})],1)},o=[],i=a("1b629"),r=a("3af3"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{attrs:{model:t.formData,size:"small","label-width":"80px",inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormInput",{attrs:{label:"收款户名",width:"174px"},on:{"on-change":function(e){t.$set(t.formData,"username",e)}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$emit("on-search",t.formData)}}}),a("div",{staticStyle:{display:"inline-block"}},[a("SearchIcon",{nativeOn:{click:function(e){return t.search(e)}}}),a("SearchReset",{nativeOn:{click:function(e){return t.reset(e)}}})],1)],1)],1)},s=[],c=(a("3a0f"),a("a3a3"),a("4d0b"),a("b34f")),u=a("4beb"),m=a("9ab4"),p=a("85f7"),f={name:"PaymentLineSearch",components:{FormInput:c["a"],FormSelect:u["a"],SearchIcon:m["a"],SearchReset:p["a"]},data:function(){return{formData:{}}},methods:{search:function(){this.$emit("on-search",this.formData)},reset:function(){for(var t in this.$refs)this.$refs[t].reset();this.formData={}}}},d=f,b=a("048f"),h=Object(b["a"])(d,n,s,!1,null,null,null);h.options.__file="PaymentLineSearch.vue";var g=h.exports,v=a("46e2"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-container"},[a("el-table",{attrs:{data:t.data,size:"small","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{type:"index",width:40}}),a("el-table-column",{attrs:{prop:"username",label:"收款户名","min-width":120}}),a("el-table-column",{attrs:{prop:"userAccount",label:"收款账号",width:140}}),a("el-table-column",{attrs:{prop:"bank",label:"收款银行"}}),a("el-table-column",{attrs:{prop:"bankAddress",label:"银行地址"}}),a("el-table-column",{attrs:{prop:"codeUrl",label:"二维码地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.codeUrl?a("span",[t._v("\n          查看 "),a("BaseMore",{nativeOn:{click:function(a){t.handleShowDialogTwo(e.row)}}})],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"sysGroupNames",label:"会员分组","min-width":150},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("separator")(e.row.sysGroupNames," ")))])]}}])}),a("el-table-column",{attrs:{prop:"discountRatio",label:"优惠比例%",width:70},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("percent")(e.row.discountRatio)))])]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排列顺序",width:45}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","min-width":130},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){t.showDialogCreate(e.row)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"mini"},on:{click:function(a){t.showDialogDelete(e.row)}}})]}}])})],1),a("UserRemittanceDialogUpdate",{ref:"dialogCreate",attrs:{data:t.activeItem},on:{"on-updated":function(e){t.$emit("on-updated")}}}),a("DialogDeleteConfirm",{ref:"dialogDelete",attrs:{title:"支付户名",name:t.activeItem.username},on:{"on-confirm":t.handleDeleteConfirm}}),a("el-dialog",{attrs:{title:"二维码详情",visible:t.dialogTwoVisible,width:"350px"},on:{"update:visible":function(e){t.dialogTwoVisible=e}}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:t.activeItem.codeUrl,width:"300",height:"300"}}),a("div",{staticStyle:{padding:"14px"}},[a("p",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.activeItem.codeUrl))])])])],1)],1)},y=[],_=a("7839"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"remittance-update"},[a("el-dialog",{attrs:{visible:t.dialogVisible,title:"修改汇款配置",width:"760px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"formCreate",staticClass:"clearfix",attrs:{model:t.formData,rules:t.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{prop:"username",label:"支付户名"}},[a("el-input",{attrs:{placeholder:"支付户名"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username","string"===typeof e?e.trim():e)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{prop:"discountRatio",label:"优惠比例%"}},[a("el-input",{attrs:{type:"number",placeholder:"优惠比例"},model:{value:t.formData.discountRatio,callback:function(e){t.$set(t.formData,"discountRatio","string"===typeof e?e.trim():e)},expression:"formData.discountRatio"}})],1),a("el-form-item",{attrs:{prop:"sort",label:"排列顺序"}},[a("el-input",{attrs:{type:"number",placeholder:"排列顺序"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort","string"===typeof e?e.trim():e)},expression:"formData.sort"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"codeUrl",label:"二维码地址"}},[a("el-input",{attrs:{placeholder:"二维码地址"},model:{value:t.formData.codeUrl,callback:function(e){t.$set(t.formData,"codeUrl","string"===typeof e?e.trim():e)},expression:"formData.codeUrl"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"bank",label:"收款银行"}},[a("el-input",{attrs:{placeholder:"收款银行"},model:{value:t.formData.bank,callback:function(e){t.$set(t.formData,"bank","string"===typeof e?e.trim():e)},expression:"formData.bank"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"userAccount",label:"收款账号"}},[a("el-input",{attrs:{placeholder:"收款账号"},model:{value:t.formData.userAccount,callback:function(e){t.$set(t.formData,"userAccount","string"===typeof e?e.trim():e)},expression:"formData.userAccount"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"bankAddress",label:"银行地址"}},[a("el-input",{attrs:{placeholder:"银行地址"},model:{value:t.formData.bankAddress,callback:function(e){t.$set(t.formData,"bankAddress","string"===typeof e?e.trim():e)},expression:"formData.bankAddress"}})],1),a("FormSelect",{attrs:{value:t.formData.userGroups,httpAPIName:"fetchUserGroups",httpAPIParams:{params:{pageNo:1,pageSize:100}},labelAttr:"name",valueAttr:"groupId",prop:"userGroups",label:"会员分组",multiple:""},on:{"on-change":function(e){t.$set(t.formData,"userGroups",e)}}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("formCreate")}}},[t._v("确定")])],1)],1)],1)},$=[],w={name:"UserRemittanceDialogUpdate",components:{FormSelect:u["a"]},props:{data:{type:Object,required:!0}},data:function(){return{dialogVisible:!1,formData:{},rules:{username:{required:!0,message:"支付户名不能为空"},discountRatio:{required:!0,message:"优惠比例不能为空"},sort:{required:!0,message:"排序顺序不能为空"},userGroups:{type:"array",required:!0,message:"会员分组至少选择一个",trigger:"change"}}}},watch:{data:function(){this.formData=this.data}},methods:{toggleDialogVisible:function(t){this.dialogVisible=t},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.dialogVisible=!1,e.$httpAPI.updateTransactionRemittance(e.formData).then(function(t){200===t.data.status?(e.$emit("on-updated"),e.$message.success("修改成功！")):e.$message.error("修改失败！")}).catch(function(t){return console.log(t)})):e.$message.warning("表单填写不正确，请根据提示填写！")})}}},S=w,C=(a("4022"),Object(b["a"])(S,k,$,!1,null,"ec7d81a2",null));C.options.__file="UserRemittanceDialogUpdate.vue";var x=C.exports,A=a("aa68"),I={name:"UserRemittanceTable",components:{BaseMore:_["a"],UserRemittanceDialogUpdate:x,DialogDeleteConfirm:A["a"]},props:{data:{type:Array,required:!0}},data:function(){return{activeItem:{username:""},dialogTwoVisible:!1}},methods:{handleShowDialogTwo:function(t){this.activeItem=t,this.dialogTwoVisible=!0},showDialogCreate:function(t){this.activeItem=t,this.$refs.dialogCreate.toggleDialogVisible(!0)},showDialogDelete:function(t){this.activeItem=t,this.$refs.dialogDelete.toggleDialogStatus(!0)},handleDeleteConfirm:function(){var t=this;this.$refs.dialogDelete.toggleDialogStatus(!1),this.$httpAPI.deleteTransactionRemittance({params:{remitId:this.activeItem.id}}).then(function(e){200===e.data.status?(t.$emit("on-deleted"),t.$message.success("删除支付路线成功！")):t.$message.error("删除支付路线失败！")}).catch(function(t){return console.log(t)})}}},R=I,U=Object(b["a"])(R,D,y,!1,null,null,null);U.options.__file="UserRemittanceTable.vue";var P=U.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"remittance-create"},[a("el-dialog",{attrs:{visible:t.dialogVisible,title:"创建新汇款配置",width:"760px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"formCreate",staticClass:"clearfix",attrs:{model:t.formData,rules:t.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{prop:"username",label:"收款户名"}},[a("el-input",{attrs:{placeholder:"收款户名"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username","string"===typeof e?e.trim():e)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{label:"收款方式"}},[a("el-radio-group",{model:{value:t.receiptWay,callback:function(e){t.receiptWay=e},expression:"receiptWay"}},[a("el-radio",{attrs:{label:0}},[t._v("二维码")]),a("el-radio",{attrs:{label:1}},[t._v("银行")])],1)],1),t.receiptWay?[a("el-form-item",{attrs:{prop:"bank",label:"收款银行"}},[a("el-input",{attrs:{placeholder:"收款银行"},model:{value:t.formData.bank,callback:function(e){t.$set(t.formData,"bank","string"===typeof e?e.trim():e)},expression:"formData.bank"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"userAccount",label:"收款账号"}},[a("el-input",{attrs:{placeholder:"收款账号"},model:{value:t.formData.userAccount,callback:function(e){t.$set(t.formData,"userAccount","string"===typeof e?e.trim():e)},expression:"formData.userAccount"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"bankAddress",label:"银行地址"}},[a("el-input",{attrs:{placeholder:"银行地址"},model:{value:t.formData.bankAddress,callback:function(e){t.$set(t.formData,"bankAddress","string"===typeof e?e.trim():e)},expression:"formData.bankAddress"}})],1)]:[a("el-form-item",{staticClass:"custom-block",attrs:{label:"二维码上传"}},[a("el-upload",{attrs:{action:"http://192.168.5.182:8080/api-f/files-anon/fdfsupload","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-success":t.handleUploadSuccess,disabled:t.uploadDisabled}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogImageVisible},on:{"update:visible":function(e){t.dialogImageVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],a("el-form-item",{attrs:{prop:"sort",label:"排列顺序"}},[a("el-input",{attrs:{type:"number",min:"0",max:"99",placeholder:"排列顺序"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort","string"===typeof e?e.trim():e)},expression:"formData.sort"}})],1),a("el-form-item",{attrs:{prop:"discountRatio",label:"赠送比例%"}},[a("el-input",{attrs:{type:"number",placeholder:"赠送比例"},model:{value:t.formData.discountRatio,callback:function(e){t.$set(t.formData,"discountRatio","string"===typeof e?e.trim():e)},expression:"formData.discountRatio"}})],1),a("FormSelect",{attrs:{value:t.formData.userGroups,httpAPIName:"fetchUserGroups",httpAPIParams:{params:{pageNo:1,pageSize:100}},labelAttr:"name",valueAttr:"groupId",prop:"userGroups",label:"会员分组",multiple:""},on:{"on-change":function(e){t.$set(t.formData,"userGroups",e)}}})],2),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("formCreate")}}},[t._v("确定")])],1)],1)],1)},O=[],q={name:"UserRemittanceDialogCreate",components:{FormSelect:u["a"]},data:function(){return{dialogImageUrl:"",dialogImageVisible:!1,uploadDisabled:!1,receiptWay:0,dialogVisible:!1,formData:{sort:0,userGroups:[]},rules:{username:{required:!0,message:"支付户名不能为空"},discountRatio:{required:!0,message:"优惠比例不能为空"},sort:[{required:!0,message:"排列顺序不能为空"},{pattern:/^[0-9]{1,2}$/,message:"排列顺序必须为 0 - 99 整数"}],userGroups:{required:!0,message:"会员分组至少选择一个"}}}},methods:{handleUploadSuccess:function(t){this.formData.codeUrl=t,this.uploadDisabled=!0},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0,this.uploadDisabled=!0},toggleDialogVisible:function(t){this.dialogVisible=t},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.dialogVisible=!1,e.$httpAPI.createTransactionRemittance(e.formData).then(function(t){200===t.data.status&&(e.$emit("on-created"),e.$message.success("创建新会员汇款设置成功！"))}).catch(function(t){return console.log(t)})):e.$message.warning("表单填写不正确，请根据提示填写！")})}}},T=q,F=(a("3954"),Object(b["a"])(T,V,O,!1,null,"24c49c32",null));F.options.__file="UserRemittanceDialogCreate.vue";var z=F.exports,j={name:"TransactionRemittanceUser",components:{SearchLayout:r["a"],PaymentLineSearch:g,BaseAdd:v["a"],UserRemittanceTable:P,UserRemittanceDialogCreate:z},mixins:[i["f"],i["k"]],data:function(){return{tableData:[],tableHttpAPI:"fetchTransactionRemittance",requestParams:{pageNo:1,pageSize:10},page:{current:1,size:10,total:10}}}},E=j,G=Object(b["a"])(E,l,o,!1,null,null,null);G.options.__file="index.vue";e["default"]=G.exports},3954:function(t,e,a){"use strict";var l=a("1638"),o=a.n(l);o.a},"3af3":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-container"},[a("div",{staticClass:"search-left-part"},[t._t("left")],2),a("div",{staticClass:"search-right-part"},[t._t("right")],2)])},o=[],i={name:"SearchLayout"},r=i,n=(a("5442"),a("048f")),s=Object(n["a"])(r,l,o,!1,null,"2b75b3fe",null);s.options.__file="SearchLayout.vue";e["a"]=s.exports},4022:function(t,e,a){"use strict";var l=a("778c"),o=a.n(l);o.a},"46e2":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"small",type:"primary"}},[t._t("default",[t._v("添加")])],2)},o=[],i=a("048f"),r={},n=Object(i["a"])(r,l,o,!1,null,null,null);n.options.__file="BaseAdd.vue";e["a"]=n.exports},"4beb":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{class:{"custom-block":t.multiple},attrs:{prop:t.prop,label:t.label}},[a("el-select",{staticClass:"custom-block",attrs:{placeholder:"选择"+t.label,multiple:t.multiple,filterable:t.filterable,clearable:""},on:{change:function(e){t.$emit("on-change",t.selectedOption)}},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}},[t.optionRoot?a("el-option",{attrs:{label:t.rootLabel,value:t.rootValue}}):t._e(),t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})],2)],1)},o=[],i=(a("25d7"),a("84fb"),{name:"FormSelect",props:{value:{type:[String,Number,Array],default:""},httpAPIName:{type:String,required:!0},httpAPIParams:{type:Object,default:function(){return{}}},labelAttr:{type:String,required:!0},valueAttr:{type:String,required:!0},prop:{type:String,default:""},label:{type:String,default:""},optionRoot:{type:Boolean,default:!1},rootLabel:{type:String,default:"root"},rootValue:{type:[String,Number],default:""},multiple:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1}},data:function(){return{options:[],selectedOption:this.value}},watch:{value:function(){this.selectedOption=this.value}},created:function(){this.fetchOptions()},methods:{reset:function(){this.selectedOption=this.multiple?[]:""},fetchOptions:function(){var t=this;this.$httpAPI[this.httpAPIName](this.httpAPIParams).then(function(e){t.$_.forEach(e.data.data,function(e){t.options.push({value:e[t.valueAttr],label:e[t.labelAttr]})})}).catch(function(t){return console.log(t)})}}}),r=i,n=a("048f"),s=Object(n["a"])(r,l,o,!1,null,null,null);s.options.__file="FormSelect.vue";e["a"]=s.exports},5442:function(t,e,a){"use strict";var l=a("ddb0"),o=a.n(l);o.a},"54b5":function(t,e,a){"use strict";var l=a("16c3"),o=a.n(l);o.a},"778c":function(t,e,a){},7839:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-view"},on:{click:function(e){t.$emit("on-click")}}})},o=[],i=(a("82c8"),a("048f")),r={},n=Object(i["a"])(r,l,o,!1,null,"8a36fe50",null);n.options.__file="BaseMore.vue";e["a"]=n.exports},"82c8":function(t,e,a){"use strict";var l=a("d5e3"),o=a.n(l);o.a},aa68:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialogVisible,title:"删除确认",width:"400px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("span",{staticClass:"highlight-text"},[t._v("删除")]),t._v("\n    "+t._s(t.title)+" 为\n    "),a("span",{staticClass:"highlight-text"},[t._v(t._s(t.name)+" ")]),t._v("数据?\n  ")]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$emit("on-confirm")}}},[t._v("确认")]),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])],1)])},o=[],i={props:{title:{type:String,required:!0},name:{type:String,required:!0}},data:function(){return{dialogVisible:!1}},methods:{toggleDialogVisible:function(t){this.dialogVisible=t}}},r=i,n=(a("54b5"),a("048f")),s=Object(n["a"])(r,l,o,!1,null,"e7eae444",null);s.options.__file="DialogDeleteConfirm.vue";e["a"]=s.exports},b34f:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:t.label,width:t.width}},[a("el-input",{attrs:{placeholder:t.label,clearable:""},on:{input:function(e){t.$emit("on-change",e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},o=[],i={name:"FormInput",props:{label:{type:String,default:"请输入内容"},width:{type:String,default:""}},data:function(){return{value:""}},methods:{reset:function(){this.value=""}}},r=i,n=a("048f"),s=Object(n["a"])(r,l,o,!1,null,null,null);s.options.__file="FormInput.vue";e["a"]=s.exports},d5e3:function(t,e,a){},ddb0:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3dd6879a.2ef36f15.js.map