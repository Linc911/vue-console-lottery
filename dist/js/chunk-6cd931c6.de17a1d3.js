(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cd931c6"],{1638:function(e,t,a){},"16c3":function(e,t,a){},"2c80":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"remittance-user"},[a("SearchLayout",[a("div",{attrs:{slot:"left"},slot:"left"},[a("PaymentLineSearch",{on:{"on-search":e.handleSearch}})],1),a("div",{attrs:{slot:"right"},slot:"right"},[a("BaseAdd",{nativeOn:{click:function(t){e.$refs.dialogCreate.toggleDialogVisible(!0)}}})],1)]),a("div",{staticClass:"content-container"},[a("UserRemittanceTable",{attrs:{data:e.tableData},on:{"on-updated":function(t){e.fetchTableData()},"on-deleted":function(t){e.fetchTableData()}}}),a("BasePagination",{attrs:{page:e.page,requestParams:e.requestParams,httpURL:e.tableHttpAPI},on:{"on-change":e.handlePaginationChange}})],1),a("UserRemittanceDialogCreate",{ref:"dialogCreate",on:{"on-created":function(t){e.fetchTableData()}}})],1)},l=[],i=a("1b629"),r=a("3af3"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("el-form",{attrs:{model:e.formData,size:"small","label-width":"80px",inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormInput",{attrs:{label:"收款户名",width:"174px"},on:{"on-change":function(t){e.$set(e.formData,"username",t)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$emit("on-search",e.formData)}}}),a("div",{staticStyle:{display:"inline-block"}},[a("SearchIcon",{nativeOn:{click:function(t){return e.search(t)}}}),a("SearchReset",{nativeOn:{click:function(t){return e.reset(t)}}})],1)],1)],1)},s=[],c=(a("3a0f"),a("a3a3"),a("4d0b"),a("b34f")),u=a("4beb"),m=a("9ab4"),p=a("85f7"),f={name:"PaymentLineSearch",components:{FormInput:c["a"],FormSelect:u["a"],SearchIcon:m["a"],SearchReset:p["a"]},data:function(){return{formData:{}}},methods:{search:function(){this.$emit("on-search",this.formData)},reset:function(){for(var e in this.$refs)this.$refs[e].reset();this.formData={}}}},d=f,b=a("048f"),h=Object(b["a"])(d,n,s,!1,null,null,null);h.options.__file="PaymentLineSearch.vue";var g=h.exports,v=a("46e2"),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("el-table",{attrs:{data:e.data,size:"small","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{type:"index",width:40}}),a("el-table-column",{attrs:{prop:"username",label:"收款户名","min-width":120}}),a("el-table-column",{attrs:{prop:"userAccount",label:"收款账号",width:140}}),a("el-table-column",{attrs:{prop:"bank",label:"收款银行"}}),a("el-table-column",{attrs:{prop:"bankAddress",label:"银行地址"}}),a("el-table-column",{attrs:{prop:"codeUrl",label:"二维码地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.codeUrl?a("span",[e._v("\n          查看 "),a("BaseMore",{nativeOn:{click:function(a){e.handleShowDialogTwo(t.row)}}})],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"sysGroupNames",label:"会员分组","min-width":150},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("separator")(t.row.sysGroupNames," ")))])]}}])}),a("el-table-column",{attrs:{prop:"discountRatio",label:"优惠比例%",width:70},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("percent")(t.row.discountRatio)))])]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排列顺序",width:45}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","min-width":130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){e.showDialogCreate(t.row)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"mini"},on:{click:function(a){e.showDialogDelete(t.row)}}})]}}])})],1),a("UserRemittanceDialogUpdate",{ref:"dialogCreate",attrs:{data:e.activeItem},on:{"on-updated":function(t){e.$emit("on-updated")}}}),a("DialogDeleteConfirm",{ref:"dialogDelete",attrs:{title:"支付户名",name:e.activeItem.username},on:{"on-confirm":e.handleDeleteConfirm}}),a("el-dialog",{attrs:{title:"二维码详情",visible:e.dialogTwoVisible,width:"350px"},on:{"update:visible":function(t){e.dialogTwoVisible=t}}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.activeItem.codeUrl,width:"300",height:"300"}}),a("div",{staticStyle:{padding:"14px"}},[a("p",{staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.activeItem.codeUrl))])])])],1)],1)},y=[],k=a("7839"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"remittance-update"},[a("el-dialog",{attrs:{visible:e.dialogVisible,title:"修改汇款配置",width:"760px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formCreate",staticClass:"clearfix",attrs:{model:e.formData,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{prop:"username",label:"支付户名"}},[a("el-input",{attrs:{placeholder:"支付户名"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username","string"===typeof t?t.trim():t)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{prop:"discountRatio",label:"优惠比例%"}},[a("el-input",{attrs:{type:"number",placeholder:"优惠比例"},model:{value:e.formData.discountRatio,callback:function(t){e.$set(e.formData,"discountRatio","string"===typeof t?t.trim():t)},expression:"formData.discountRatio"}})],1),a("el-form-item",{attrs:{prop:"sort",label:"排列顺序"}},[a("el-input",{attrs:{type:"number",placeholder:"排列顺序"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort","string"===typeof t?t.trim():t)},expression:"formData.sort"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"codeUrl",label:"二维码地址"}},[a("el-input",{attrs:{placeholder:"二维码地址"},model:{value:e.formData.codeUrl,callback:function(t){e.$set(e.formData,"codeUrl","string"===typeof t?t.trim():t)},expression:"formData.codeUrl"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"bank",label:"收款银行"}},[a("el-input",{attrs:{placeholder:"收款银行"},model:{value:e.formData.bank,callback:function(t){e.$set(e.formData,"bank","string"===typeof t?t.trim():t)},expression:"formData.bank"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"userAccount",label:"收款账号"}},[a("el-input",{attrs:{placeholder:"收款账号"},model:{value:e.formData.userAccount,callback:function(t){e.$set(e.formData,"userAccount","string"===typeof t?t.trim():t)},expression:"formData.userAccount"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"bankAddress",label:"银行地址"}},[a("el-input",{attrs:{placeholder:"银行地址"},model:{value:e.formData.bankAddress,callback:function(t){e.$set(e.formData,"bankAddress","string"===typeof t?t.trim():t)},expression:"formData.bankAddress"}})],1),a("FormSelect",{attrs:{value:e.formData.userGroups,httpAPIName:"fetchUserGroups",httpAPIParams:{params:{pageNo:1,pageSize:100}},labelAttr:"name",valueAttr:"groupId",prop:"userGroups",label:"会员分组",multiple:""},on:{"on-change":function(t){e.$set(e.formData,"userGroups",t)}}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("formCreate")}}},[e._v("确定")])],1)],1)],1)},$=[],w={name:"UserRemittanceDialogUpdate",components:{FormSelect:u["a"]},props:{data:{type:Object,required:!0}},data:function(){return{dialogVisible:!1,formData:{},rules:{username:{required:!0,message:"支付户名不能为空"},discountRatio:{required:!0,message:"优惠比例不能为空"},sort:{required:!0,message:"排序顺序不能为空"},userGroups:{type:"array",required:!0,message:"会员分组至少选择一个",trigger:"change"}}}},watch:{data:function(){this.formData=this.data}},methods:{toggleDialogVisible:function(e){this.dialogVisible=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.dialogVisible=!1,t.$httpAPI.updateTransactionRemittance(t.formData).then(function(e){200===e.data.status?(t.$emit("on-updated"),t.$message.success("修改成功！")):t.$message.error("修改失败！")}).catch(function(e){return console.log(e)})):t.$message.warning("表单填写不正确，请根据提示填写！")})}}},S=w,A=(a("4022"),Object(b["a"])(S,_,$,!1,null,"ec7d81a2",null));A.options.__file="UserRemittanceDialogUpdate.vue";var x=A.exports,C=a("aa68"),I={name:"UserRemittanceTable",components:{BaseMore:k["a"],UserRemittanceDialogUpdate:x,DialogDeleteConfirm:C["a"]},props:{data:{type:Array,required:!0}},data:function(){return{activeItem:{username:""},dialogTwoVisible:!1}},methods:{handleShowDialogTwo:function(e){this.activeItem=e,this.dialogTwoVisible=!0},showDialogCreate:function(e){this.activeItem=e,this.$refs.dialogCreate.toggleDialogVisible(!0)},showDialogDelete:function(e){this.activeItem=e,this.$refs.dialogDelete.toggleDialogStatus(!0)},handleDeleteConfirm:function(){var e=this;this.$refs.dialogDelete.toggleDialogStatus(!1),this.$httpAPI.deleteTransactionRemittance({params:{remitId:this.activeItem.id}}).then(function(t){200===t.data.status?(e.$emit("on-deleted"),e.$message.success("删除支付路线成功！")):e.$message.error("删除支付路线失败！")}).catch(function(e){return console.log(e)})}}},R=I,U=Object(b["a"])(R,D,y,!1,null,null,null);U.options.__file="UserRemittanceTable.vue";var P=U.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"remittance-create"},[a("el-dialog",{attrs:{visible:e.dialogVisible,title:"创建新汇款配置",width:"760px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formCreate",staticClass:"clearfix",attrs:{model:e.formData,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{prop:"username",label:"收款户名"}},[a("el-input",{attrs:{placeholder:"收款户名"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username","string"===typeof t?t.trim():t)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{label:"收款方式"}},[a("el-radio-group",{model:{value:e.receiptWay,callback:function(t){e.receiptWay=t},expression:"receiptWay"}},[a("el-radio",{attrs:{label:0}},[e._v("二维码")]),a("el-radio",{attrs:{label:1}},[e._v("银行")])],1)],1),e.receiptWay?[a("el-form-item",{attrs:{prop:"bank",label:"收款银行"}},[a("el-input",{attrs:{placeholder:"收款银行"},model:{value:e.formData.bank,callback:function(t){e.$set(e.formData,"bank","string"===typeof t?t.trim():t)},expression:"formData.bank"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"userAccount",label:"收款账号"}},[a("el-input",{attrs:{placeholder:"收款账号"},model:{value:e.formData.userAccount,callback:function(t){e.$set(e.formData,"userAccount","string"===typeof t?t.trim():t)},expression:"formData.userAccount"}})],1),a("el-form-item",{staticClass:"custom-block",attrs:{prop:"bankAddress",label:"银行地址"}},[a("el-input",{attrs:{placeholder:"银行地址"},model:{value:e.formData.bankAddress,callback:function(t){e.$set(e.formData,"bankAddress","string"===typeof t?t.trim():t)},expression:"formData.bankAddress"}})],1)]:[a("el-form-item",{staticClass:"custom-block",attrs:{label:"二维码上传"}},[a("el-upload",{attrs:{action:"http://192.168.5.182:8080/api-f/files-anon/fdfsupload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-success":e.handleUploadSuccess,disabled:e.uploadDisabled}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogImageVisible},on:{"update:visible":function(t){e.dialogImageVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],a("el-form-item",{attrs:{prop:"sort",label:"排列顺序"}},[a("el-input",{attrs:{type:"number",min:"0",max:"99",placeholder:"排列顺序"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort","string"===typeof t?t.trim():t)},expression:"formData.sort"}})],1),a("el-form-item",{attrs:{prop:"discountRatio",label:"赠送比例%"}},[a("el-input",{attrs:{type:"number",placeholder:"赠送比例"},model:{value:e.formData.discountRatio,callback:function(t){e.$set(e.formData,"discountRatio","string"===typeof t?t.trim():t)},expression:"formData.discountRatio"}})],1),a("FormSelect",{attrs:{value:e.formData.userGroups,httpAPIName:"fetchUserGroups",httpAPIParams:{params:{pageNo:1,pageSize:100}},labelAttr:"name",valueAttr:"groupId",prop:"userGroups",label:"会员分组",multiple:""},on:{"on-change":function(t){e.$set(e.formData,"userGroups",t)}}})],2),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("formCreate")}}},[e._v("确定")])],1)],1)],1)},O=[],q={name:"UserRemittanceDialogCreate",components:{FormSelect:u["a"]},data:function(){return{dialogImageUrl:"",dialogImageVisible:!1,uploadDisabled:!1,receiptWay:0,dialogVisible:!1,formData:{sort:0,userGroups:[]},rules:{username:{required:!0,message:"支付户名不能为空"},discountRatio:{required:!0,message:"优惠比例不能为空"},sort:[{required:!0,message:"排列顺序不能为空"},{pattern:/^[0-9]{1,2}$/,message:"排列顺序必须为 0 - 99 整数"}],userGroups:{required:!0,message:"会员分组至少选择一个"}}}},methods:{handleUploadSuccess:function(e){this.formData.codeUrl=e,this.uploadDisabled=!0},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0,this.uploadDisabled=!0},toggleDialogVisible:function(e){this.dialogVisible=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.dialogVisible=!1,t.$httpAPI.createTransactionRemittance(t.formData).then(function(e){200===e.data.status&&(t.$emit("on-created"),t.$message.success("创建新会员汇款设置成功！"))}).catch(function(e){return console.log(e)})):t.$message.warning("表单填写不正确，请根据提示填写！")})}}},T=q,F=(a("3954"),Object(b["a"])(T,V,O,!1,null,"24c49c32",null));F.options.__file="UserRemittanceDialogCreate.vue";var z=F.exports,G={name:"TransactionRemittanceUser",components:{SearchLayout:r["a"],PaymentLineSearch:g,BaseAdd:v["a"],UserRemittanceTable:P,UserRemittanceDialogCreate:z},mixins:[i["j"],i["o"]],data:function(){return{tableData:[],tableHttpAPI:"fetchTransactionRemittance",requestParams:{pageNo:1,pageSize:10},page:{current:1,size:10,total:10}}}},j=G,E=Object(b["a"])(j,o,l,!1,null,null,null);E.options.__file="index.vue";t["default"]=E.exports},3954:function(e,t,a){"use strict";var o=a("1638"),l=a.n(o);l.a},4022:function(e,t,a){"use strict";var o=a("778c"),l=a.n(o);l.a},"4beb":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{class:{"custom-block":e.multiple},attrs:{prop:e.prop,label:e.label}},[a("el-select",{staticClass:"custom-block",attrs:{placeholder:"选择"+e.label,multiple:e.multiple,filterable:e.filterable,clearable:""},on:{change:function(t){e.$emit("on-change",e.selectedOption)}},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}},[e.optionRoot?a("el-option",{attrs:{label:e.rootLabel,value:e.rootValue}}):e._e(),e._l(e.options,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})],2)],1)},l=[],i=(a("25d7"),a("84fb"),{name:"FormSelect",props:{value:{type:[String,Number,Array],default:""},httpAPIName:{type:String,required:!0},httpAPIParams:{type:Object,default:function(){return{}}},labelAttr:{type:String,required:!0},valueAttr:{type:String,required:!0},prop:{type:String,default:""},label:{type:String,default:""},optionRoot:{type:Boolean,default:!1},rootLabel:{type:String,default:"root"},rootValue:{type:[String,Number],default:""},multiple:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1}},data:function(){return{options:[],selectedOption:this.value}},watch:{value:function(){this.selectedOption=this.value}},created:function(){this.fetchOptions()},methods:{reset:function(){this.selectedOption=this.multiple?[]:""},fetchOptions:function(){var e=this;this.$httpAPI[this.httpAPIName](this.httpAPIParams).then(function(t){e.$_.forEach(t.data.data,function(t){e.options.push({value:t[e.valueAttr],label:t[e.labelAttr]})})}).catch(function(e){return console.log(e)})}}}),r=i,n=a("048f"),s=Object(n["a"])(r,o,l,!1,null,null,null);s.options.__file="FormSelect.vue";t["a"]=s.exports},"54b5":function(e,t,a){"use strict";var o=a("16c3"),l=a.n(o);l.a},"778c":function(e,t,a){},7839:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-view"},on:{click:function(t){e.$emit("on-click")}}})},l=[],i=(a("82c8"),a("048f")),r={},n=Object(i["a"])(r,o,l,!1,null,"8a36fe50",null);n.options.__file="BaseMore.vue";t["a"]=n.exports},"82c8":function(e,t,a){"use strict";var o=a("d5e3"),l=a.n(o);l.a},aa68:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,title:"删除确认",width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("span",{staticClass:"highlight-text"},[e._v("删除")]),e._v("\n    "+e._s(e.title)+" 为\n    "),a("span",{staticClass:"highlight-text"},[e._v(e._s(e.name)+" ")]),e._v("数据?\n  ")]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$emit("on-confirm")}}},[e._v("确认")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])},l=[],i={props:{title:{type:String,required:!0},name:{type:String,required:!0}},data:function(){return{dialogVisible:!1}},methods:{toggleDialogVisible:function(e){this.dialogVisible=e}}},r=i,n=(a("54b5"),a("048f")),s=Object(n["a"])(r,o,l,!1,null,"e7eae444",null);s.options.__file="DialogDeleteConfirm.vue";t["a"]=s.exports},b34f:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{attrs:{label:e.label,width:e.width}},[a("el-input",{attrs:{placeholder:e.label,clearable:""},on:{input:function(t){e.$emit("on-change",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},l=[],i={name:"FormInput",props:{label:{type:String,default:"请输入内容"},width:{type:String,default:""}},data:function(){return{value:""}},methods:{reset:function(){this.value=""}}},r=i,n=a("048f"),s=Object(n["a"])(r,o,l,!1,null,null,null);s.options.__file="FormInput.vue";t["a"]=s.exports},d5e3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6cd931c6.de17a1d3.js.map