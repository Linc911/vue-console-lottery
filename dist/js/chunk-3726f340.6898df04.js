(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3726f340"],{"16c3":function(e,t,i){},"2c22":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"roles-list"},[i("div",{staticClass:"search-container clearfix"},[i("div",{staticClass:"search-left"},[i("SearchPlain",{attrs:{placeholder:"角色名搜索"},on:{"on-input":e.handleSearchInfo}})],1),i("div",{staticClass:"search-right"},[i("router-link",{attrs:{to:"/system/role/create"}},[i("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"small",type:"primary"}},[e._v("添加")])],1)],1)]),i("div",{staticClass:"table-roles"},[i("el-table",{attrs:{data:e.tableActiveData,size:"small","highlight-current-row":"",border:""}},[i("el-table-column",{attrs:{prop:"code",label:"Code"}}),i("el-table-column",{attrs:{prop:"name",label:"角色名"}}),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("time")(t.row.createTime)))])]}}])}),i("el-table-column",{attrs:{prop:"operations",label:"操作","min-width":"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(i){e.$router.push("/system/role/"+t.row.id+"/update")}}}),i("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"primary"},on:{click:function(i){e.showDialogDelete(t.row)}}}),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){e.showDialogAuthorization(t.row.id)}}},[e._v("分配权限")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){e.showDialogMenu(t.row.id)}}},[e._v("分配菜单")])]}}])})],1)],1),i("DialogDeleteConfirm",{ref:"dialogDelete",attrs:{name:e.deletingRole.name,title:"角色名"},on:{"on-confirm":e.handleDialogDeleteConfirm}}),i("el-dialog",{attrs:{title:"分配角色权限",visible:e.dialogAuthorizationVisible,width:"560px",center:""},on:{"update:visible":function(t){e.dialogAuthorizationVisible=t}}},[i("el-transfer",{attrs:{data:e.transferData,"filter-method":e.transferFilterMethod,titles:["已分配权限","未分配权限"],"filter-placeholder":"角色权限",filterable:""},model:{value:e.transferCurrentData,callback:function(t){e.transferCurrentData=t},expression:"transferCurrentData"}})],1),i("el-dialog",{attrs:{title:"分配角色菜单",visible:e.dialogTreeVisible,width:"60%",center:""},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[i("div",{staticClass:"tree-container"},[i("el-tree",{attrs:{data:e.treeData,"empty-text":"数据返回异常","show-checkbox":"","highlight-current":"","default-expand-all":""},on:{"check-change":e.handleCheckChange}})],1)])],1)},n=[],l=(i("25d7"),i("cf54"),i("dccb"),i("63af"),i("3a0f"),i("a3a3"),i("4d0b"),i("8cd6")),o=i("aa68"),r={name:"rolesList",components:{SearchPlain:l["a"],DialogDeleteConfirm:o["a"]},data:function(){return{tableData:[],tableActiveData:[],deletingRole:{name:""},dialogAuthorizationVisible:!1,authorizations:[],transferData:[],transferCurrentData:[],dialogTreeVisible:!1,treeData:[]}},created:function(){this.fetchUsersRoles()},methods:{handleSearchInfo:function(e){this.tableActiveData=this.$_.filter(this.tableData,function(t){return t.name.includes(e)})},showDialogDelete:function(e){this.deletingRole=e,this.$refs.dialogDelete.toggleDialogStatus(!0)},handleDialogDeleteConfirm:function(){var e=this;this.$axios.delete("/api-u/roles/"+this.deletingRole.id).then(function(){e.$refs.dialogDelete.toggleDialogStatus(!1),e.fetchUsersRoles(),e.$message.success("删除角色成功！")}).catch(function(){return e.$message.error("删除角色失败！")})},showDialogAuthorization:function(e){var t=this;this.transferData.length?this.dialogAuthorizationVisible=!0:this.$axios.get("/api-u/roles/".concat(e,"/permissions")).then(function(e){e.data.forEach(function(e){t.transferData.push({key:e.id,label:e.name,disabled:!1})}),t.dialogAuthorizationVisible=!0})},transferFilterMethod:function(e,t){return t.label.indexOf(e)>-1},showDialogMenu:function(e){var t=this;this.treeData.length?this.dialogTreeVisible=!0:this.$axios.get("api-b/menus/tree").then(function(e){e.data.forEach(function(e,i){t.treeData.push({id:e.id,label:e.name,disabled:!1,children:[]}),e.child.forEach(function(e,a){t.treeData[i].children.push({id:e.id,label:e.name,disabled:!1})})}),t.dialogTreeVisible=!0})},handleCheckChange:function(){console.log("handleCheckChange")},fetchUsersRoles:function(){var e=this;this.$axios.get("/api-u/roles").then(function(t){e.tableData=e.tableActiveData=t.data.data}).catch(function(e){console.log(e)})}}},s=r,c=(i("87dd"),i("048f")),u=Object(c["a"])(s,a,n,!1,null,"2aa57443",null);u.options.__file="SystemRolesList.vue";t["default"]=u.exports},3159:function(e,t,i){},"54b5":function(e,t,i){"use strict";var a=i("16c3"),n=i.n(a);n.a},"87dd":function(e,t,i){"use strict";var a=i("3159"),n=i.n(a);n.a},"8cd6":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:e.placeholder,debounce:400,"suffix-icon":"el-icon-search",size:"small"},on:{input:e.searchInfo},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})},n=[],l=(i("9ce1"),{props:{placeholder:{type:String,default:"请输入内容"}},data:function(){return{search:""}},methods:{searchInfo:function(){this.$emit("on-input",this.search)}}}),o=l,r=i("048f"),s=Object(r["a"])(o,a,n,!1,null,null,null);s.options.__file="SearchPlain.vue";t["a"]=s.exports},"9add":function(e,t,i){"use strict";var a=i("7228"),n=i("7e22"),l=i("cce3"),o=i("5b8a"),r=i("5761");e.exports=function(e,t,i){var s=r(e),c=i(o,s,""[e]),u=c[0],h=c[1];l(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(n(String.prototype,e,u),a(RegExp.prototype,s,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},"9ce1":function(e,t,i){i("9add")("search",1,function(e,t,i){return[function(i){"use strict";var a=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,a):new RegExp(i)[t](String(a))},i]})},aa68:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,title:"删除确认",width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("span",{staticClass:"highlight-text"},[e._v("删除")]),e._v("\n    "+e._s(e.title)+" 为\n    "),i("span",{staticClass:"highlight-text"},[e._v(e._s(e.name)+" ")]),e._v("数据?\n  ")]),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$emit("on-confirm")}}},[e._v("确认")]),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])},n=[],l={props:{title:{type:String,required:!0},name:{type:String,required:!0}},data:function(){return{dialogVisible:!1}},methods:{toggleDialogVisible:function(e){this.dialogVisible=e}}},o=l,r=(i("54b5"),i("048f")),s=Object(r["a"])(o,a,n,!1,null,"e7eae444",null);s.options.__file="DialogDeleteConfirm.vue";t["a"]=s.exports}}]);
//# sourceMappingURL=chunk-3726f340.6898df04.js.map